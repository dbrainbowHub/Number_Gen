
# Lotto 6/45 Discord Bot: Analysis & Recommendation (Korea)

This repository provides a Discord bot for analyzing and recommending numbers for the Korean Lotto 6/45 (Donghaeng Lottery).

> **Disclaimer:**
> * The probability of winning the Korean Lotto is 1 in 8,145,060 (~0.0000123%), so statistical analysis does not guarantee any real advantage.
> * This bot uses AI-assisted logic and statistical simulations for entertainment purposes only.
> 
> 

## 🔄 System Architecture (New)

This version introduces a decoupled data update system for stability and efficiency:

* **Data Source:** The bot does not scrape the website directly. Instead, it monitors a `lotto_latest.json` file.
* **Automation Integration:** This file is expected to be generated by an external automation tool (e.g., **n8n**, cron scripts) that fetches the latest winning numbers.
* **Update Process:** The `update_lotto.py` script reads this JSON file and safely appends the new data to the main `lotto_total.csv` database.

## 📊 Recommendation Logic (v2.1 Updated)

This system recommends numbers based on past winning data using a **High-Volume Simulation (500,000 trials)** approach. It targets the statistical **"Golden Zone"** to maximize winning probabilities.

[Main Constraints]

1. **Statistical Golden Zone (Optimized)**
* **Sum: 120 ~ 180** (Targeting the range where 64% of 1st prizes occur).
* **Frequent Numbers:** Must include at least 2 numbers from the **Top 15 all-time frequent numbers**.
* **Cold Numbers:** Bottom 5 frequent numbers are strictly excluded.


2. **Quality Assurance**
* **500,000 Simulations:** Tries up to 500k times to find perfect sets.
* **Zero Duplication:** Completely excludes past winning numbers and ensures all 15 recommended sets are unique.
* **No Fallback:** Low-quality numbers are never generated; only those meeting strict criteria are shown.


3. **Pattern Filters**
* `1~4 numbers per range (1~15, 16~30, 31~45).`
* Excludes all-odd or all-even combinations.
* Limits mathematical patterns (Primes, Fibonacci, etc.) to realistic ratios.



---

## Main Features

* **Automatic Data Synchronization**
* Detects `lotto_latest.json` updates every Saturday at 23:00.
* Automatically updates `lotto_total.csv` and triggers analysis.


* **Performance Analysis**
* Checks if last week's recommendations matched the actual winning numbers.
* Alerts immediately if a 1st prize number is found.


* **Manual Commands**
* `!num`: Generate 15 sets of high-quality numbers.
* `!update`: Manually trigger the update process (reads local JSON).
* `!anal`: Show detailed hit-rate analysis.



## Main Files

* `discord_lotto_bot.py`: Main Bot Controller
* `lotto_generator.py`: **Core Logic (v2.1)**
* `lotto_analyzer.py`: Analysis Tools
* `update_lotto.py`: **Data Processor (JSON to CSV)**
* `lotto_total.csv`: Database
* `start_bot.sh` / `stop_bot.sh`: Management Scripts

## Installation

1. Install dependencies: `pip install -r requirements.txt`
2. Configure `.env` with your Discord Token.
3. Ensure `lotto_latest.json` is provided by your automation tool (or manually).
4. Run: `./start_bot.sh`

## License

MIT License

---

# 대한민국 로또6/45 분석 및 추천 디스코드 봇

이 저장소는 **대한민국의 동행복권 로또6/45**의 당첨번호 분석 및 추천 기능을 제공하는 디스코드 봇입니다.

> **주의사항:** 당첨 확률은 약 814만 분의 1이며, 본 코드는 통계적 분석을 통한 재미와 참고용입니다.

## 🔄 시스템 구조 (변경됨)

이번 버전부터는 데이터 수집과 처리 과정이 분리되어 안정성이 강화되었습니다.

* **데이터 연동:** 봇이 웹사이트를 직접 크롤링하지 않습니다. 대신 외부 자동화 도구(**n8n** 등)가 생성한 `lotto_latest.json` 파일을 감지합니다.
* **업데이트 로직:** `update_lotto.py`가 해당 JSON 파일을 읽어 검증한 후, 메인 데이터베이스(`lotto_total.csv`)에 안전하게 기록합니다.

## 📊 번호 추천 논리 (v2.1 업데이트)

**'골든존(Golden Zone)' 전략**과 **대규모 시뮬레이션(50만 회)**을 결합하여, 통계적으로 당첨 확률이 가장 높은 구간을 공략합니다.

[핵심 로직]

1. **통계적 골든존 공략**
* **합계 구간: 120 ~ 180** (역대 1등 당첨번호의 64%가 집중된 구간)
* **빈출 번호:** 역대 최다 빈출 Top 15 중 **최소 2개 필수 포함**
* **제외수:** 하위 5개 저빈출 번호 완전 배제


2. **품질 보증 시스템**
* **500,000회 시뮬레이션:** 매회 50만 번의 생성을 시도하여 엄격한 조건을 통과한 번호만 엄선합니다.
* **중복 완전 차단:** 과거 1등 번호와 동일한 조합, 또는 세트 내 중복 조합을 원천 차단합니다.
* **비상 모드 삭제:** 조건에 맞지 않는 번호는 억지로 채우지 않습니다.


3. **패턴 필터링**
* 구간별 쏠림 방지, 홀짝 비율(6:0 제외), 연속 번호(4연속 제외) 등 기본 필터 적용



## 주요 기능

* **자동 데이터 동기화**: 매주 토요일 23시, `lotto_latest.json` 파일 유무를 확인하여 데이터 갱신 및 분석 수행
* **성과 분석**: 지난주 추천 번호 적중 결과 자동 리포트 (1등 당첨 발견 시 알림)
* **명령어**:
* `!num`: 고품질 번호 15세트 생성
* `!update`: 데이터 수동 동기화 (JSON 파일 기반)
* `!anal`: 적중률 분석 보고서



## 설치 및 실행

1. 필수 패키지 설치: `pip install -r requirements.txt`
2. `.env` 설정 (봇 토큰)
3. 외부 자동화 도구(n8n)가 `lotto_latest.json`을 생성하도록 설정
4. 실행: `./start_bot.sh`

## 라이선스


MIT License
